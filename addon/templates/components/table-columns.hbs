<table class="table">
  <thead>
    <tr>
      {{#each columns as |column|}}
        {{component column.headerComponent
          table=table
          column=column
          class=column.headerClassNames
          onColumnWidthChange=(action 'columnWidthChanged')}}
      {{/each}}
    </tr>
  </thead>

  {{#if table.collapsable}}
    <tbody>
      {{#each table.content as |rowGroup|}}
        <tr class="table-row {{mergedRowClasses}} collapsable {{if (eq rowGroup.isCollapsed false) 'is-expanded' 'is-collapsed'}} {{if rowGroup.loading 'is-loading'}}" {{action 'toggleRowCollapse' rowGroup}}>
          {{#if rowGroup.label}}
            <td colspan={{columns.length}} class="table-cell">
              {{rowGroup.label}}
            </td>
          {{else}}
            {{yield rowGroup}}
          {{/if}}
        </tr>

        {{#if (get rowGroup rowGroupDataName)}}
          {{#each (get rowGroup rowGroupDataName) as |childRow|}}
            <tr class="table-row {{if rowGroup.isCollapsed 'is-collapsed'}}">
              {{yield childRow}}
            </tr>
          {{/each}}
        {{else}}
          <tr class="is-collapsed">
            {{yield}}
          </tr>
        {{/if}}

      {{/each}}
    </tbody>
  {{else}}
    {{#vertical-collection
      tagName="tbody"
      itemClassNames=(concat 'table-row ' mergedRowClasses)
      content=table.content
      defaultHeight=rowHeight
      bufferSize=0.5
      alwaysUseDefaultHeight=true
      scrollThrottle=16
      containerSelector=".justa-table"
      as |row|}}

      {{yield row}}

    {{/vertical-collection}}
  {{/if}}
</table>
